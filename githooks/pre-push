#!/bin/sh
set -eu

REPO_ROOT="$(git rev-parse --show-toplevel)"
cd "$REPO_ROOT"

run() {
    local task="$1"
    echo "==> Running ./gradlew $task"
    ./gradlew "$task"
}

run ktlintCheck
run check
run :composeApp:cleanJvmTest :composeApp:jvmTest
run :composeApp:cleanTestProdDebugUnitTest :composeApp:testProdDebugUnitTest
run :composeApp:cleanIosSimulatorArm64Test :composeApp:iosSimulatorArm64Test
run :composeApp:assembleRelease
run :composeApp:linkDebugFrameworkIosArm64
run :composeApp:jvmJar
