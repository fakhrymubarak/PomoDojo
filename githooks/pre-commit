#!/bin/sh
set -eu

REPO_ROOT="$(git rev-parse --show-toplevel)"
cd "$REPO_ROOT"

echo "==> Running pre-commit checks in parallel..."

# Run all tasks in a single Gradle invocation with parallel execution
./gradlew --parallel \
    ktlintFormat \
    cleanJvmTest \
    jvmTest \
    detekt

echo "==> Pre-commit checks completed successfully"
